<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>OCSI IT Inventory – QR Code Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- QR Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
    body {
        font-family: system-ui, sans-serif;
        background: #f5f7fb;
        margin: 0;
        padding: 20px;
    }
    h1 {
        margin-top: 0;
        color: #0f172a;
        font-size: 1.6rem;
    }
    .generator-box {
        max-width: 600px;
        margin: auto;
        background: white;
        padding: 20px;
        border-radius: 14px;
        border: 1px solid #d5d9e2;
    }
    label { font-size: .85rem; color: #475569; display: block; margin-top: 12px; }
    input, textarea {
        width: 100%;
        padding: 9px;
        border-radius: 8px;
        border: 1px solid #cbd5e1;
        font-size: .9rem;
    }
    .btn {
        margin-top: 15px;
        padding: 10px 16px;
        border: none;
        border-radius: 999px;
        cursor: pointer;
        font-size: .9rem;
        font-weight: 500;
    }
    .btn-primary { background: #1a73e8; color: white; }
    .qr-container {
        margin-top: 20px;
        padding: 12px;
        display: inline-block;
        background: white;
        border: 1px solid #d5d9e2;
        border-radius: 12px;
    }
    .download-btn {
        margin-top: 12px;
        padding: 8px 14px;
        background: #0f172a;
        color: white;
        border-radius: 999px;
        cursor: pointer;
        font-size: .85rem;
        border: none;
    }
</style>
</head>

<body>

<div class="generator-box">
    <h1>QR Code Generator</h1>
    <p style="color:#64748b; font-size:.9rem;">
        Enter the item details to generate a scannable QR code for OCSI Inventory.
    </p>

    <label>Document ID (Firestore ID)</label>
    <input id="docId" type="text" placeholder="e.g. aK39fdL92jf3" />

    <label>Asset ID</label>
    <input id="assetId" type="text" placeholder="e.g. OCSI-LAP-024" />

    <label>Device Name</label>
    <input id="deviceName" type="text" placeholder="e.g. Teacher Laptop" />

    <label>Manufacturer / Model</label>
    <input id="model" type="text" placeholder="e.g. Apple MacBook Air M2" />

    <button class="btn btn-primary" onclick="generate()">Generate QR Code</button>

    <!-- QR Output -->
    <div id="qrOutput"></div>
</div>

<script>
let qrObject = null;

function generate() {
    const docId = document.getElementById("docId").value.trim();
    const assetId = document.getElementById("assetId").value.trim();
    const deviceName = document.getElementById("deviceName").value.trim();
    const model = document.getElementById("model").value.trim();

    if (!docId) {
        alert("Document ID is required.");
        return;
    }

    const qrData = {
        id: docId,
        assetId,
        deviceName,
        model
    };

    const container = document.getElementById("qrOutput");
    container.innerHTML = ""; // reset

    const qrBox = document.createElement("div");
    qrBox.className = "qr-container";
    qrBox.id = "qrBox";

    container.appendChild(qrBox);

    qrObject = new QRCode(qrBox, {
        text: JSON.stringify(qrData),
        width: 200,
        height: 200
    });

    const downloadBtn = document.createElement("button");
    downloadBtn.innerText = "⬇️ Download QR Code";
    downloadBtn.className = "download-btn";
    downloadBtn.onclick = downloadQR;

    container.appendChild(downloadBtn);
}

function downloadQR() {
    const img = document.querySelector("#qrBox img");
    if (!img) return alert("QR not generated yet.");

    const link = document.createElement("a");
    link.href = img.src;
    link.download = "OCSI-QR-Code.png";
    link.click();
}
</script>

</body>
</html>
