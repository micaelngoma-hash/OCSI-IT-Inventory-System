<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Print QR Labels</title>
<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.esm.js" type="module"></script>
<style>
body{font-family:system-ui;padding:20px;}
#labels{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;}
.label{border:1px solid #ddd;padding:10px;text-align:center;}
.label svg{width:100%;}
@media print{button{display:none}}
</style>
</head>
<body>

<button onclick="window.print()">ðŸ–¨ Print</button>
<div id="labels"></div>

<script type="module">
import QRCode from "https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.esm.js";
import { db } from "./firebase.js";
import { doc,getDoc } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

const ids=(new URLSearchParams(location.search).get("ids")||"").split(",");
const labels=document.getElementById("labels");

for(const id of ids){
  const snap=await getDoc(doc(db,"items",id));
  if(!snap.exists()) continue;
  const svg=await QRCode.toString(id,{type:"svg",scale:8});
  labels.innerHTML+=`<div class="label">${svg}<div>${snap.data().assetId||""}</div></div>`;
}
</script>
</body>
</html>
