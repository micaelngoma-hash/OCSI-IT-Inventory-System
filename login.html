<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Login • OCSI IT Inventory</title>
  <style>
    body{margin:0;font-family:system-ui;background:#0b1020;color:#e5e7eb;display:grid;place-items:center;height:100vh;}
    .card{width:min(420px,92vw);background:#111a33;border:1px solid #223257;border-radius:14px;padding:18px;}
    h2{margin:0 0 10px;}
    label{display:block;margin-top:10px;font-size:.9rem;color:#b8c1d9;}
    input{width:100%;padding:10px;border-radius:8px;border:1px solid #2c3a5c;background:#0f172a;color:white;}
    button{width:100%;margin-top:14px;padding:10px;border-radius:8px;border:none;background:#1a73e8;color:white;font-weight:600;cursor:pointer;}
    .msg{margin-top:10px;font-size:.9rem;color:#f8b4b4;min-height:1.2em;}
    .muted{opacity:.7;font-size:.85rem;margin-top:8px;}
  </style>
</head>
<body>
  <div class="card">
    <h2>OCSI IT Inventory Login</h2>
    <label>Email</label>
    <input id="email" type="email" placeholder="you@ocsi.school"/>
    <label>Password</label>
    <input id="pass" type="password" placeholder="••••••••"/>
    <button id="loginBtn">Sign In</button>
    <div class="msg" id="msg"></div>
    <div class="muted">If you don’t have access, contact IT Admin.</div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-analytics.js";
    import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } 
      from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCnf-hKBJXqEkmwwdM29RWwvZjSAmTMGSE",
      authDomain: "ocsi-it-iventory-system.firebaseapp.com",
      projectId: "ocsi-it-iventory-system",
      storageBucket: "ocsi-it-iventory-system.firebasestorage.app",
      messagingSenderId: "941219752022",
      appId: "1:941219752022:web:f3214e808d36a4a53833f7",
      measurementId: "G-CM3P9CRX1K"
    };

    const app = initializeApp(firebaseConfig);
    try { getAnalytics(app); } catch(e){}
    const auth = getAuth(app);

    const email=document.getElementById("email");
    const pass=document.getElementById("pass");
    const msg=document.getElementById("msg");

    onAuthStateChanged(auth, (user)=>{
      if(user) location.href="index.html";
    });

    document.getElementById("loginBtn").addEventListener("click", async ()=>{
      msg.textContent="";
      try{
        await signInWithEmailAndPassword(auth, email.value.trim(), pass.value);
        location.href="index.html";
      }catch(e){
        msg.textContent=e.message;
      }
    });
  </script>
</body>
</html>
