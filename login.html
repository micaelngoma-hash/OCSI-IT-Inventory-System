<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>OCSI IT Inventory ‚Äì Login</title>
<style>
  :root{
    --bg:#0f172a;--brand:#1a73e8;
  }
  *{box-sizing:border-box;}
  body{
    margin:0;font-family:system-ui;
    background:radial-gradient(circle at top,#1d263b,#020617);
    color:white;display:flex;align-items:center;justify-content:center;
    min-height:100vh;
  }
  .card{
    background:#020617e6;border-radius:16px;
    padding:24px 22px;width:320px;
    border:1px solid #1f2937;
    box-shadow:0 18px 45px rgba(0,0,0,.6);
  }
  h1{margin:0 0 6px;font-size:1.4rem;}
  p{margin:0 0 14px;font-size:.9rem;color:#9ca3af;}
  .btn{
    border:none;border-radius:999px;
    padding:9px 12px;width:100%;
    background:var(--brand);color:white;
    font-weight:600;font-size:.9rem;
    display:flex;align-items:center;justify-content:center;gap:8px;
    cursor:pointer;
  }
  .small{font-size:.78rem;color:#6b7280;margin-top:10px;}
</style>
</head>
<body>

<div class="card">
  <h1>OCSI IT Inventory</h1>
  <p>Sign in with your OCSI Google Workspace account.</p>
  <button id="googleBtn" class="btn" type="button">
    <span>üîê</span><span>Sign in with Google</span>
  </button>
  <div class="small">
    Access is restricted to IT, Office Staff, and Faculty Staff accounts.
  </div>
</div>

<script type="module">
  import { auth, loginWithGoogle, watchAuth } from "./firebase.js";

  // If already logged in, go straight to dashboard
  watchAuth({
    onReady:()=>{ location.href="index.html"; },
    allowedRoles:["admin","it","viewer"],
    whoEl:null
  });

  document.getElementById("googleBtn").onclick = async ()=>{
    try{
      await loginWithGoogle();
      location.href="index.html";
    }catch(e){
      console.error(e);
      alert("Login failed: "+e.message);
    }
  };
</script>

</body>
</html>
